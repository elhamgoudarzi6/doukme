<p-toast position="center"></p-toast>
<section class="theme-container">
  <div class="row justify-content-center my-5">
    <div class="login-card">
      <div class="row justify-content-center text-center">
        <div class="col-12">
          <img src="../../../../../assets/images/logo-doukme.png" width="200px" alt="about">
          <h6> ورود یا ایجاد حساب کاربری</h6>
        </div>
      </div>
      <form (ngSubmit)="sendSMS()" [formGroup]="form" class="w-100">
        <div class="row justify-content-center">
          <div class="col-12 mt-4">
            <span class="p-input-icon-right w-100">
              <i class="pi pi-user"></i>
              <input pKeyFilter="int" class="form-control" formControlName="mobile" maxlength="11" minlength="11"
                name="mobile" pInputText placeholder="شماره موبایل" required />
            </span>
            <ul class="mt-1 text-right list-inline" *ngFor="let error of errorMessages.mobile">
              <li class="font-small text-danger font-weight-bold list-inline-item"
                *ngIf="form.get('mobile').hasError(error.type) &&(form.get('mobile').dirty || form.get('mobile').touched)">
                {{ error.message }}
              </li>
            </ul>
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="col-12 text-center">
            <small class="terms-text">با ورود به حساب کاربری، با
              <a [routerLink]="['/terms']" class="btn btn-link primary-color px-1">شرایط و ضوابط</a>
              ما موافقت کرده اید.</small>
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="text-center">
            <button [disabled]="form.invalid" class="btn btn-block login-btn" mat-raised-button type="submit">ورود
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>


<!-- <p-dialog [(visible)]="display" [style]="{ width: '40vw' }" (onHide)="onCloseDialog()">
  <ng-template pTemplate="header"> اعتبارسنجی شماره همراه </ng-template>

  <div class="row justify-content-center">
    <div class="col-12">
      <p class="text-center">
        کد ارسال شده به شماره همراه در کادر زیر وارد نمائید
      </p>
    </div>

    <div class="col-12 text-center">
      <div class="clockdiv">
        <span class="seconds">
          {{ timeLeft }}
        </span>
      </div>
    </div>
    <div class="col-12 text-center">
      <ng-otp-input #ngOtpInput (onInputChange)="onOtpChange($event)" [config]="{length:6,allowNumbersOnly:true}"
        dir="ltr" style="font-family: IRANSansWeb" class="text-center"></ng-otp-input>
      <p class="text-danger mt-2 mb-3 text-center" *ngIf="invalidSMS">
        کد وارد شده اشتباه می باشد.
      </p>
      <a class="mt-2 mb-3 small text-center" (click)="sendSMS()" *ngIf="resendSMS">ارسال مجدد کد</a>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="row justify-content-center mt-3">
      <button
        pButton
        (click)="redirectToPanel()"
        type="submit"
        class="green-button"
        label="ورود به حساب کاربری"
        cornerStyleClass="text-center"
        [disabled]="validationBtn"
      ></button>
    </div>
  </ng-template>
</p-dialog> -->


<p-dialog [(visible)]="display" [style]="{ width: '40vw' }" (onHide)="onCloseDialog()" [resizable]="true">
  <ng-template pTemplate="header"> اعتبارسنجی شماره همراه </ng-template>
  <div class="row justify-content-center">
    <div class="col-12">
      <p class="text-center">
        {{getCodeSMS}}<br>
        کد ارسال شده به شماره همراه در کادر زیر وارد نمائید
      </p>
    </div>

    <div class="col-12 text-center">
      <span class="seconds">
        {{ timeLeft }}
      </span>
    </div>

    <div class="col-12 text-center">

      <ng-otp-input #ngOtpInput (onInputChange)="onOtpChange($event)" [config]="{length:5,allowNumbersOnly:true}"
        dir="ltr" style="font-family: IRANSans_Light !important;" class="text-center"></ng-otp-input>

      <input  type="text" autocomplete="one-time-code" 
      pKeyFilter="int" maxlength="5" minlength="5" inputmode="numeric" />

      <p class="text-danger mt-2 mb-3 text-center" *ngIf="invalidSMS">
        کد وارد شده اشتباه می باشد.
      </p>
      <a class="mt-2 mb-2 small text-center" (click)="sendSMS()" *ngIf="resendSMS">ارسال مجدد کد</a>
    </div>
    <p-footer dir="rtl" class="text-left">
      <button (click)="redirectToPanel()"  class="btn btn-block login-btn" mat-raised-button
        type="submit">تایید
      </button>
    </p-footer>
  </div>
</p-dialog>